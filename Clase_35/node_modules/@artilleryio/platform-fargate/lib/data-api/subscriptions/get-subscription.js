module.exports={getSubscription:getSubscription};const util=require("../../util"),getAccountId=require("../../util")["getAccountId"],promisify=require("util")["promisify"],debug=require("debug")("data-api:subscriptions:get-subscription"),setDefaultAWSCredentials=require("../../utils/aws-set-default-credentials");async function getSubscription(){await setDefaultAWSCredentials();var accountId=await promisify(getAccountId)(),doc=await promisify(util.getRC)(),decoded=await promisify(util.verify)(doc.token),accountId=(await promisify(util.vlk)(doc.token),{awsAccountId:accountId,planName:decoded.planName,backendRegion:doc.backendRegion,backendVersion:doc.version,licenseEmail:decoded.email,maxWorkers:decoded.mw,maxParallelTestRuns:decoded.mcr,expiresOn:decoded.sed});return doc.secondaryBackends&&(accountId.secondaryBackends=[{backendRegion:doc.secondaryBackends[0].backendRegion,version:doc.secondaryBackends[0].version}]),decoded.it&&(accountId.isTrial=!0),debug(decoded),accountId}